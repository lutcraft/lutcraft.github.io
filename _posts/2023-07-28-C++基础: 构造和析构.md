---
layout: post
title: 构造和析构
categories: C++
description: 
keywords: 
---

## 构造函数

与类名完全相同的成员函数为这个类的构造函数,构造函数没有返回值.

```cpp
class A
{
    int i;
    A();
}

A::A(int i)
{
    this.i = i;
};

```


## 析构函数
析构函数的命名为在构造函数名前加~,注意析构函数不能有参数.
```cpp
class A
{
    int i;
    A();
    ~A();
};

A::A(int i)
{
    this.i = i;
};
A::~A()
{
    
}
```


## 何时构造和析构

在对象创建时创建调用构造函数,在对象的作用域终结时,析构.


举例:

```cpp
int main()
{
    {
        A a;        //构造
        a.i = 1;
    }               //析构
}                   //注意:不是在这里析构的!

```

构造和析构必须成对出现,如果通过goto跳过构造,则编译器会返回error.

```cpp
class A
{
    int a;
public:
    A(int i);
};

A::A(int i)
{
    a = i;
}

int main(int argc, char const *argv[])
{
    int i = 0;
    if(i < 10)
        goto result;
    A a1(1);
result:
    return 0;
}


```

编译这段代码:

<img src="/images/blog/goto_init.png" width="80%" alt="goto_init" />